{% extends "base.html" %}
{% block title %}New Form | Continuous Improvement{% endblock %}

{% block content %}
<h2>Create a form</h2>

{% if error %}
  <p class="error">{{ error }}</p>
{% endif %}

<form method="post" class="form" id="createForm">
  <label>Title</label>
  <input name="title" required>

  <label>Description</label>
  <textarea name="description" rows="3"></textarea>

  <hr>

  <h3>Questions</h3>

  <div id="questionsWrap">
    <div class="q-row">
      <label>Question 1</label>
      <input name="questions[]" required placeholder="e.g. What should we improve this week?">
    </div>
  </div>

  <button type="button" class="secondary" id="addQuestionBtn">+ Add a question</button>

  <button type="submit">Create</button>
</form>

<script>
  const wrap = document.getElementById("questionsWrap");
  const btn = document.getElementById("addQuestionBtn");

  btn.addEventListener("click", () => {
    const count = wrap.querySelectorAll(".q-row").length + 1;

    const div = document.createElement("div");
    div.className = "q-row";
    div.innerHTML = `
      <label>Question ${count}</label>
      <input name="questions[]" placeholder="Type your question...">
    `;

    wrap.appendChild(div);
  });
</script>
{% endblock %}
